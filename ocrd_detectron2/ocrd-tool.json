{
    "git_url": "https://github.com/bertsky/ocrd_detectron2",
    "version": "0.1.4",
    "tools": {
        "ocrd-detectron2-segment": {
            "executable": "ocrd-detectron2-segment",
            "categories": ["Layout analysis"],
            "steps": ["layout/segmentation/region"],
            "description": "Detect regions with Detectron2 models",
            "input_file_grp": [
                "OCR-D-IMG"
            ],
            "output_file_grp": [
                "OCR-D-SEG-REGION"
            ],
            "parameters": {
                "operation_level": {
                    "type": "string",
                    "enum": ["page", "table"],
                    "default": "page",
                    "description": "hierarchy level which to predict and assign regions for"
                },
                "categories": {
                    "type": "array",
                    "required": true,
                    "description": "maps each region category (position) of the model to a PAGE region type (and @type or @custom if separated by colon), e.g. ['TextRegion:paragraph', 'TextRegion:heading', 'TextRegion:floating', 'TableRegion', 'ImageRegion'] for PubLayNet; categories with an empty string will be skipped during prediction"
                },
                "model_config": {
                    "type": "string",
                    "format": "uri",
                    "content-type": "text/yaml",
                    "required": true,
                    "description": "path name of model config"
                },
                "model_weights": {
                    "type": "string",
                    "format": "uri",
                    "content-type": "application/octet-stream",
                    "required": true,
                    "description": "path name of model weights"
                },
                "min_confidence": {
                    "type": "number",
                    "format": "float",
                    "default": 0.5,
                    "description": "confidence threshold for detections"
                },
                "postprocessing": {
                    "type": "string",
                    "enum": ["full", "only-nms", "only-morph", "none"],
                    "default": "full",
                    "description": "which postprocessing steps to enable: by default, applies a custom non-maximum suppression (to avoid overlaps) and morphological operations (using connected component analysis on the binarized input image to shrink or expand regions)"
                },
                "debug_img": {
                    "type": "string",
                    "enum": ["none", "instance_colors", "instance_colors_only", "category_colors"],
                    "default": "none",
                    "description": "paint an AlternativeImage which blends the input image and all raw decoded region candidates"
                },
                "device": {
                    "type": "string",
                    "default": "cuda",
                    "description": "select computing device for Torch (e.g. cpu or cuda:0); will fall back to CPU if no GPU is available"
                }
            },
            "resources": [
                {
                    "description": "TableBank via LayoutLM R152-FPN config",
                    "name": "TableBank_X152.yaml",
                    "size": 536,
                    "url": "https://layoutlm.blob.core.windows.net/tablebank/model_zoo/detection/All_X152/All_X152.yaml"
                },
                {
                    "description": "TableBank via LayoutLM R152-FPN weights",
                    "name": "TableBank_X152.pth",
                    "size": 1103832675,
                    "url": "https://layoutlm.blob.core.windows.net/tablebank/model_zoo/detection/All_X152/model_final.pth"
                },
                {
                    "description": "PubLayNet via hpanwar08 R50-FPN config",
                    "name": "PubLayNet_R_50_FPN_3x.yaml",
                    "size": 388,
                    "url": "https://github.com/hpanwar08/detectron2/raw/master/configs/DLA_mask_rcnn_R_50_FPN_3x.yaml"
                },
                {
                    "description": "PubLayNet via hpanwar08 R50-FPN weights",
                    "name": "PubLayNet_R_50_FPN_3x.pth",
                    "size": 176249992,
                    "path_in_archive": "model_final_trimmed.pth",
                    "url": "https://www.dropbox.com/sh/44ez171b2qaocd2/AAB0huidzzOXeo99QdplZRjua"
                },
                {
                    "description": "PubLayNet via hpanwar08 R101-FPN config",
                    "name": "PubLayNet_R_101_FPN_3x.yaml",
                    "size": 392,
                    "url": "https://github.com/hpanwar08/detectron2/raw/master/configs/DLA_mask_rcnn_R_101_FPN_3x.yaml"
                },
                {
                    "description": "PubLayNet via hpanwar08 R101-FPN weights",
                    "name": "PubLayNet_R_101_FPN_3x.pth",
                    "size": 254055290,
                    "path_in_archive": "model_final.pth",
                    "url": "https://www.dropbox.com/sh/wgt9skz67usliei/AAD9n6qbsyMz1Y3CwpZpHXCpa"
                },
                {
                    "description": "PubLayNet via hpanwar08 X101-FPN config",
                    "name": "PubLayNet_X_101_32x8d_FPN_3x.yaml",
                    "size": 592,
                    "url": "https://github.com/hpanwar08/detectron2/raw/master/configs/DLA_mask_rcnn_X_101_32x8d_FPN_3x.yaml"
                },
                {
                    "description": "PubLayNet via hpanwar08 X101-FPN weights",
                    "name": "PubLayNet_X_101_32x8d_FPN_3x.pth",
                    "path_in_archive": "model_final_trimmed.pth",
                    "size": 431414189,
                    "url": "https://www.dropbox.com/sh/1098ym6vhad4zi6/AABe16eSdY_34KGp52W0ruwha"
                },
                {
                    "description": "PubLayNet via JPLeoRX R50-FPN config",
                    "name": "PubLayNet_R_50_FPN_3x_JPLeoRX.yaml",
                    "size": 192,
                    "url": "https://github.com/facebookresearch/detectron2/raw/main/configs/COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_3x.yaml"
                },
                {
                    "description": "PubLayNet via JPLeoRX R50-FPN weights",
                    "name": "PubLayNet_R_50_FPN_3x_JPLeoRX.pth",
                    "size": 7692,
                    "url": "https://keybase.pub/jpleorx/detectron2-publaynet/mask_rcnn_R_50_FPN_3x/model_final.pth"
                },
                {
                    "description": "PubLayNet via JPLeoRX R101-FPN config",
                    "name": "PubLayNet_R_101_FPN_3x_JPLeoRX.yaml",
                    "size": 194,
                    "url": "https://github.com/facebookresearch/detectron2/raw/main/configs/COCO-InstanceSegmentation/mask_rcnn_R_101_FPN_3x.yaml"
                },
                {
                    "description": "PubLayNet via JPLeoRX R101-FPN weights",
                    "name": "PubLayNet_R_101_FPN_3x_JPLeoRX.pth",
                    "size": 7696,
                    "url": "https://keybase.pub/jpleorx/detectron2-publaynet/mask_rcnn_R_101_FPN_3x/model_final.pth"
                },
                {
                    "description": "DocBank via LayoutLM X101-FPN config",
                    "name": "DocBank_X101.yaml",
                    "path_in_archive": "X101/X101.yaml",
                    "size": 526,
                    "url": "https://layoutlm.blob.core.windows.net/docbank/model_zoo/X101.zip"
                },
                {
                    "description": "DocBank via LayoutLM X101-FPN config",
                    "name": "DocBank_X101.pth",
                    "path_in_archive": "X101/model.pth",
                    "size": 835606605,
                    "url": "https://layoutlm.blob.core.windows.net/docbank/model_zoo/X101.zip"
                },
                {
                    "description": "NewspaperNavigator via LayoutParser R50-PanopticFPN config",
                    "name": "NewspaperNavigator_R_50_PFPN_3x.yaml",
                    "size": 5434,
                    "url": "https://www.dropbox.com/s/wnido8pk4oubyzr/config.yml&dl=1"
                },
                {
                    "description": "NewspaperNavigator via LayoutParser R50-PanopticFPN weights",
                    "name": "NewspaperNavigator_R_50_PFPN_3x.pth",
                    "size": 330226761,
                    "url": "https://www.dropbox.com/s/6ewh6g8rqt2ev3a/model_final.pth&dl=1"
                },
                {
                    "description": "MathFormulaDetection via LayoutParser R50-FPN config",
                    "name": "Math_R_50_FPN_3x.yaml",
                    "size": 5632,
                    "url": "https://www.dropbox.com/s/ld9izb95f19369w/config.yaml?dl=1"
                },
                {
                    "description": "MathFormulaDetection via LayoutParser R50-FPN weights",
                    "name": "Math_R_50_FPN_3x.pth",
                    "size": 330084629,
                    "url": "https://www.dropbox.com/s/7xel0i3iqpm2p8y/model_final.pth?dl=1"
                }
            ]
        }
    }
}
